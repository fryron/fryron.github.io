"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5411],{85411:function(n,t,e){e.d(t,{xk:function(){return A}});var r=e(34051),o=e.n(r),a=e(67294),u=e(88767),i=e(31479),c=e(93627),l=e(91474),s=e(4480),f=e(36634);function v(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function d(n,t,e,r,o,a,u){try{var i=n[a](u),c=i.value}catch(l){return void e(l)}i.done?t(c):Promise.resolve(c).then(r,o)}function p(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function u(n){d(a,r,o,u,i,"next",n)}function i(n){d(a,r,o,u,i,"throw",n)}u(void 0)}))}}function h(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function m(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),r.forEach((function(t){h(n,t,e[t])}))}return n}function b(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,o,a=[],u=!0,i=!1;try{for(e=e.call(n);!(u=(r=e.next()).done)&&(a.push(r.value),!t||a.length!==t);u=!0);}catch(c){i=!0,o=c}finally{try{u||null==e.return||e.return()}finally{if(i)throw o}}return a}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return v(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return v(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(n,t,e){return e?n.queryContractSmart(t,{share:{amount:e}}):null},k=function(){var n=p(o().mark((function n(t,e,r,a){var u,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.queryContractSmart(e,{token_info:{}});case 2:return u=n.sent,n.next=5,a({tokenA:r,tokenAmountInDenom:(0,c.mF)(null===u||void 0===u?void 0:u.total_supply)});case 5:return i=n.sent,n.abrupt("return",m({},u,{dollarValue:(0,c.T4)(i)}));case 7:case"end":return n.stop()}}),n)})));return function(t,e,r,o){return n.apply(this,arguments)}}(),w=function(){var n=p(o().mark((function n(t,e,r,a,u,i){var l,s,f;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.queryContractSmart(e,{balance:{address:r}});case 2:return l=n.sent,n.next=5,y(t,a,null===l||void 0===l?void 0:l.balance);case 5:return s=n.sent,n.next=8,i({tokenA:u,tokenAmountInDenom:(0,c.mF)(s)});case 8:return f=n.sent,n.abrupt("return",{lpBalance:null===l||void 0===l?void 0:l.balance,underlyingAsset:s,dollarValue:(0,c.T4)(f)});case 10:case"end":return n.stop()}}),n)})));return function(t,e,r,o,a,u){return n.apply(this,arguments)}}(),A=function(n,t,e){var r=(0,s.sJ)(f.Zc),a=r.chainId,i=r.client,c=r.address,v=b((0,l.a)(),1)[0],d=(0,u.useQuery)(["vaultsDeposit",n,a],p(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",w(i,n,c,t,e,v));case 1:case"end":return r.stop()}}),r)}))),{enabled:Boolean(a)&&Boolean(i)&&Boolean(n)&&Boolean(v)});return{balance:d.data,isLoading:d.isLoading,refetch:d.refetch}};t.ZP=function(n){var t,e,r=(0,s.sJ)(f.Zc),c=r.chainId,v=r.network,d=(0,u.useQuery)(["vaults/list",c,v],p(o().mark((function n(){var t,e;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="/".concat(v,"/").concat(c).concat("/vaults_list.json"),n.next=3,fetch(t);case 3:return e=n.sent,n.abrupt("return",null===e||void 0===e?void 0:e.json());case 5:case"end":return n.stop()}}),n)}))),m({},n,{enabled:Boolean(c)&&Boolean(v),refetchOnMount:!1})),h=d.data,y=d.isLoading,A=function(n){var t=(0,s.sJ)(f.Zc),e=t.chainId,r=t.client,a=t.address,i=b((0,l.a)(),1)[0],c=(0,u.useQuery)(["vaultsDeposits",n,e],p(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(n.map((function(n){var t=n.lp_token,e=n.vault_address,o=n.vault_assets;return w(r,t,a,e,o,i)}))));case 1:case"end":return t.stop()}}),t)}))),{enabled:Boolean(e)&&Boolean(r)&&Boolean(null===n||void 0===n?void 0:n.length)});return{balance:c.data,isLoading:c.isLoading,refetch:c.refetch}}(null===h||void 0===h||null===(t=h.vaults)||void 0===t?void 0:t.map((function(n){return{lp_token:n.lp_token,vault_address:n.vault_address,vault_assets:n.vault_assets}}))),g=A.balance,B=A.refetch,x=function(n){var t=(0,s.sJ)(f.Zc).chainId,e=b((0,l.a)(),2),r=e[0],a=e[1],c=(0,i.r)(t),v=(0,u.useQuery)(["vaultsInfo",n,t,a],p(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(n.map((function(n){var t=n.lp_token,e=n.vault_assets;return k(c,t,e,r)}))));case 1:case"end":return t.stop()}}),t)}))),{enabled:Boolean(t)&&Boolean(n)&&Boolean(r),refetchOnMount:!1});return{balance:v.data,isLoading:v.isLoading}}(null===h||void 0===h||null===(e=h.vaults)||void 0===e?void 0:e.map((function(n){return{lp_token:n.lp_token,vault_assets:n.vault_assets}}))),_=x.balance;return{vaults:(0,a.useMemo)((function(){if(!h)return null;var n=h.vaults.map((function(n,t){return m({},n,{hasDeposit:Number(null===g||void 0===g?void 0:g[t].lpBalance)>0,deposits:null===g||void 0===g?void 0:g[t],totalDeposit:null===_||void 0===_?void 0:_[t]})}));return m({},h,{vaults:n})}),[g,h,_]),isLoading:y,refetch:B}}},91474:function(n,t,e){e.d(t,{a:function(){return A}});var r=e(34051),o=e.n(r),a=e(67294),u=e(88767),i=e(34272),c=e(31479),l=e(21253),s=e(64087),f=e(93627),v=e(4480),d=e(36634),p=e(96823),h=e(7569);function m(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function b(n,t,e,r,o,a,u){try{var i=n[a](u),c=i.value}catch(l){return void e(l)}i.done?t(c):Promise.resolve(c).then(r,o)}function y(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function u(n){b(a,r,o,u,i,"next",n)}function i(n){b(a,r,o,u,i,"throw",n)}u(void 0)}))}}function k(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,o,a=[],u=!0,i=!1;try{for(e=e.call(n);!(u=(r=e.next()).done)&&(a.push(r.value),!t||a.length!==t);u=!0);}catch(c){i=!0,o=c}finally{try{u||null==e.return||e.return()}finally{if(i)throw o}}return a}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return m(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return m(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(){var n,t,e=(n=["\n    query ($chain: String!, $tokenList: String!) {\n      priceByTokenList(chain: $chain, tokenList: $tokenList) {\n        content {\n          priceInvertedUsd\n        }\n      }\n    }\n  "],t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}})));return w=function(){return e},e}var A=function(){var n=(0,s.Vd)(),t=(0,v.sJ)(d.Zc).chainId,e=(0,c.r)(t),r=function(){var n=(0,i.Ps)(w()),t=(0,u.useQuery)("whale-price",y(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.ZP)("https://tfm-multi-stage.tfm.dev/graphql",n,{chain:"terra2",tokenList:"ibc/36A02FFC4E74DF4F64305130C3DFA1B06BEAC775648927AA44467C76A77AB8DB,ibc/B3504E092456BA618CC28AC671A71FB08C6CA0FD0BE7C8A5B5A3E2DD933CC9E4"}));case 1:case"end":return t.stop()}}),t)})))).data;return(0,a.useMemo)((function(){var n,e,r;return(0,f.OK)(null===t||void 0===t||null===(n=t.priceByTokenList)||void 0===n||null===(e=n.content)||void 0===e||null===(r=e[0])||void 0===r?void 0:r.priceInvertedUsd).toNumber()||0}),[t])}(),m=k((0,l.t)(null===n||void 0===n?void 0:n.symbol),2),b=m[0],A=m[1],g=k((0,h.Xo)(),2),B=g[0],x=g[1],_=(0,a.useCallback)(function(){var t=y(o().mark((function t(r){var a,u,i,c,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.tokenA,u=r.tokenB,i=void 0===u?n:u,c=r.tokenAmountInDenom){t.next=3;break}return t.abrupt("return",0);case 3:return t.next=5,(0,p.g)({matchingPools:B({tokenA:a,tokenB:i}),tokenA:a,tokenB:i,client:e,amount:1,id:null===a||void 0===a?void 0:a.id});case 5:if(l=t.sent,(null===a||void 0===a?void 0:a.id)!==(null===i||void 0===i?void 0:i.id)||!(null===a||void 0===a?void 0:a.id)){t.next=8;break}return t.abrupt("return",c/l*b);case 8:return t.abrupt("return",l);case 9:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),[b,r,e,B,A]);return[_,Boolean(n&&e&&!A&&!x)]}}}]);