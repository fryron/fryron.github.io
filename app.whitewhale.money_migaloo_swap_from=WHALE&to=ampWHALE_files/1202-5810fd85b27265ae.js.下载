(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1202],{64098:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(85893),o=t(68527);function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function a(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return i(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=a(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[6,6],2),t=n[0],r=n[1],o=e.slice(0,t),i=e.slice(-1*r,e.length);return e.length>t+r?[o,i].join("..."):e},c=function(e,n){switch(e){case"uni-6":return"https://testnet.mintscan.io/juno-testnet/txs/".concat(n);case"migaloo-1":return"https://explorer.silknodes.io/migaloo/tx/".concat(n);case"narwhal-1":return"https://testnet.migaloo.explorers.guru/transaction/".concat(n);case"pisco-1":return"https://finder.terra.money/testnet/tx/".concat(n);case"juno-1":return"https://mintscan.io/juno/txs/".concat(n);case"phoenix-1":return"https://finder.terra.money/mainnet/tx/".concat(n);case"chihuahua-1":return"https://www.mintscan.io/chihuahua/txs/".concat(n);case"injective-888":return"https://testnet.explorer.injective.network/transaction/".concat(n);case"injective-1":return"https://explorer.injective.network/transaction/".concat(n);case"comdex-1":return"https://mintscan.io/comdex/txs/".concat(n);default:return null}},u=function(e){var n=e.children,t=e.txHash,i=e.chainId;return console.log({chainId:i,txHash:t}),(0,r.jsxs)(o.rU,{isExternal:!0,href:c(i,t),children:[n," TxHash: ",s(t,[4,4])]})}},11202:function(e,n,t){"use strict";t.d(n,{Z:function(){return J}});var r=t(85893),o=t(68527),i=t(87215),a=t(11163),s=t(4480),c=t(36634),u=t(34051),l=t.n(u),d=t(67294),f=t(5434),v=t(15193);function p(){var e,n,t=(e=["\n  /* dark styling of the editor */\n  .ace-jsoneditor .ace_scroller {\n    background-color: #1C1C1C;\n  }\n  .ace-jsoneditor .ace_gutter {\n      // background-color: #424242;\n    background-color: #1C1C1C;\n    color: #FAFAFA\n  }\n  div.jsoneditor-value.jsoneditor-string {\n      color: red;\n  }\n  .ace-jsoneditor .ace_marker-layer .ace_active-line, .ace-jsoneditor .ace_gutter-active-line {\n    // background: #3CCD64;\n    background: #1C1C1C;\n    color: #3CCD64 ;\n  }\n  .ace-jsoneditor .ace_cursor {\n    border-left : 2px solid #3CCD64\n  }\n  .ace-jsoneditor .ace_variable{\n    color: #FAFAFA;\n  }\n  .ace-jsoneditor .ace_marker-layer .ace_selection {\n    background: #3CCD64 ;\n    color: white;\n  }\n  .ace_fold-widget {\n      color: #3CCD64\n  }\n  div.jsoneditor, div.jsoneditor-menu {\n    border-color: #1C1C1C;\n  }\n  div.jsoneditor-value.jsoneditor-string, div.jsoneditor textarea.jsoneditor-text{\n    color: color: #FAFAFA;\n  }\n  .ace-jsoneditor .ace_string {\n    color : #3b8aee;\n  }\n\n  div.jsoneditor-value.jsoneditor-number {\n    color: #ee422e;\n  }\n\n  div.jsoneditor-value.jsoneditor-boolean {\n    color: #ff8c00;\n  }\n\n  div.jsoneditor-value.jsoneditor-null {\n    color: #004ed0;\n  }\n\n  div.jsoneditor-value.jsoneditor-color-value {\n    color: #1a1a1a;\n  }\n\n  div.jsoneditor-value.jsoneditor-invalid {\n    color: #1a1a1a;\n  }\n  .ace-jsoneditor .ace_indent-guide {\n    background: unset;\n  }\n  .ace-jsoneditor .ace_marker-layer .ace_bracket {\n    // bracket border\n    margin-left: 0px;\n    margin-top: 0px;\n  }\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return p=function(){return t},t}var h=(0,t(84632).Z)(o.xu)(p());var g=function(e){var n=e.containerRef;return(0,r.jsx)(h,{ref:n,width:"full",height:"full",border:"1px solid #FFFFFF",borderRadius:"30px",padding:"24px"})},m=JSON.parse('{"juno-1":"juno1qa7vdlm6zgq3radal5sltyl4t4qd32feug9qs50kcxda46q230pqzny48s","phoenix-1":"terra1c8tpvta3umr4mpufvxmq39gyuw2knpyxyfgq8thpaeyw2r6a80qsg5wa00","chihuahua-1":"chihuahua1qe6jsllyvrlmtz2xqef9k7q67xeyj3zcuc09wzptnvev3wyyd4fs4y4ce9","injective-1":"inj1hyja4uyjktpeh0fxzuw2fmjudr85rk2qxgqkvu","migaloo-1":"migaloo19pze0n07guzj6yla2708q2feh38q9n8gxmkk8fjnuprfh6y9ngjqs90hcy"}'),x=t(34250),y=(t(48764).Buffer,t(88767)),j=t(35074),b=t(64098),w=t(48074);function C(e,n,t,r,o,i,a){try{var s=e[i](a),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,o)}var k,S=function(){var e,n=(e=l().mark((function e(n){var t,r,o,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.msgs,r=n.client,o=n.contractAddress,i=n.senderAddress,e.abrupt("return",r.execute(i,o,t,[]));case 2:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){C(i,r,o,a,s,"next",e)}function s(e){C(i,r,o,a,s,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}();function F(e,n,t,r,o,i,a){try{var s=e[i](a),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,o)}function A(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){F(i,r,o,a,s,"next",e)}function s(e){F(i,r,o,a,s,"throw",e)}a(void 0)}))}}!function(e){e[e.Idle=0]="Idle",e[e.Estimating=1]="Estimating",e[e.Ready=2]="Ready",e[e.Posting=3]="Posting",e[e.Broadcasting=4]="Broadcasting",e[e.Success=5]="Success",e[e.Failed=6]="Failed"}(k||(k={}));var I=function(e){var n=e.enabled,t=e.client,o=e.senderAddress,i=e.encodedMsgs,a=e.msgs,s=e.contractAddress,c=e.onBroadcasting,u=e.onSuccess,f=e.onError,v=(0,w.Z)(i,200),p=(0,j.pm)(),h=(0,d.useState)(k.Idle),g=h[0],m=h[1],x=(0,d.useState)(void 0),C=x[0],F=x[1],I=(0,d.useState)(null),q=I[0],O=I[1],_=(0,d.useState)(null),E=_[0],P=_[1],z=(0,y.useQueryClient)(),N=(0,y.useQuery)(["fee",a,q],A(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(k.Estimating),e.prev=1,e.next=4,t.simulate(o,v,"");case 4:return n=e.sent,E&&P(null),m(k.Ready),e.abrupt("return",n);case 10:if(e.prev=10,e.t0=e.catch(1),!/insufficient funds/i.test(e.t0.toString())&&!/Overflow: Cannot Sub with/i.test(e.t0.toString())){e.next=20;break}throw console.error(e.t0),m(k.Idle),O("Insufficient Funds"),P("Insufficient Funds"),new Error("Insufficient Funds");case 20:if(!/Negative profits when attempting to flash-loan /i.test(e.t0.toString())){e.next=28;break}throw console.error(e.t0),m(k.Idle),O("Negative profit"),P("Negative profit"),new Error("Negative profit");case 28:throw console.error(e.t0),m(k.Idle),O("Failed to execute transaction."),Error("Failed to execute transaction.");case 32:case"end":return e.stop()}}),e,null,[[1,10]])}))),{enabled:null!=v&&g==k.Idle&&null==q&&Boolean(t)&&n,refetchOnWindowFocus:!1,retry:!1,staleTime:0,onSuccess:function(){m(k.Ready)},onError:function(){m(k.Idle)}}),R=N.data,B=N.refetch,M=(0,y.useMutation)((function(e){return S({msgs:a,client:t,contractAddress:s,senderAddress:o})}),{onMutate:function(){m(k.Posting)},onError:function(e){var n="";console.error(null===e||void 0===e?void 0:e.toString()),/insufficient funds/i.test(null===e||void 0===e?void 0:e.toString())||/Overflow: Cannot Sub with/i.test(null===e||void 0===e?void 0:e.toString())?(O("Insufficient Funds"),n="Insufficient Funds"):/Max spread assertion/i.test(null===e||void 0===e?void 0:e.toString())?(O("Try increasing slippage"),n="Try increasing slippage"):/Request rejected/i.test(null===e||void 0===e?void 0:e.toString())?(O("User Denied"),n="User Denied"):(O("Failed to execute transaction."),n="Failed to execute transaction."),p({title:"Flashloan Failed.",description:n,status:"error",duration:9e3,position:"top-right",isClosable:!0}),m(k.Failed),null===f||void 0===f||f()},onSuccess:function(e){var n;m(k.Broadcasting),console.log({data:e}),F(e.transactionHash||(null===e||void 0===e?void 0:e.txHash)),z.invalidateQueries(["@pool-liquidity","multipleTokenBalances","tokenBalance"]),null===c||void 0===c||c(e.transactionHash||(null===e||void 0===e?void 0:e.txHash)),p({title:"Flashloan Success.",description:(0,r.jsx)(b.Z,{txHash:(null===e||void 0===e?void 0:e.transactionHash)||(null===e||void 0===e?void 0:e.txHash),chainId:null===t||void 0===t||null===(n=t.client)||void 0===n?void 0:n.chainId,children:" "}),status:"success",duration:9e3,position:"top-right",isClosable:!0})}}).mutate,J=(0,y.useQuery)(["txInfo",C],(function(){if(null!=C)return t.getTx(C)}),{enabled:null!=C,retry:!0}).data,U=(0,d.useCallback)(A(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null==a||a.length<1)){e.next=2;break}return e.abrupt("return");case 2:M({msgs:a});case 3:case"end":return e.stop()}}),e)}))),[a,M]);return(0,d.useEffect)((function(){var e;null!=J&&null!=C&&((null===J||void 0===J||null===(e=J.txResponse)||void 0===e?void 0:e.code)?(m(k.Failed),null===f||void 0===f||f(C,J)):(m(k.Success),null===u||void 0===u||u(C,J)))}),[J,f,u,C]),(0,d.useEffect)((function(){q&&O(null),g!=k.Idle&&m(k.Idle)}),[a]),(0,d.useMemo)((function(){return{simulate:B,fee:R,buttonLabel:E,submit:U,txStep:g,txInfo:J,txHash:C,error:q}}),[g,J,C,q,R,E,U,B])},q=function(e){var n=e.json,t=(0,s.sJ)(c.Zc),r=t.address,o=t.client,i=t.chainId,a=(0,d.useMemo)((function(){return 0!==Object.keys(n).length&&i?function(e){var n=e.senderAddress,t=e.contractAddress,r=e.message;return(0,x.L$)({senderAddress:n,contractAddress:t,message:r})}({senderAddress:r,contractAddress:m[i],message:n}):null}),[n,r,i]);return I({enabled:Boolean(o)&&Boolean(a),msgs:n,client:o,senderAddress:r,encodedMsgs:[a],contractAddress:m[i]})},O=(t(13755),JSON.parse('{"title":"Flashloan","description":"Flash loan message","type":"object","additonalProperties":false,"properties":{"flash_loan":{"type":"object","properties":{"assets":{"type":"array","items":{"type":"object","properties":{"amount":{"type":"string"},"info":{"type":"object","properties":{"native_token":{"type":"object","properties":{"denom":{"type":"string"}},"required":["denom"]},"token":{"type":"object","properties":{"contract_addr":{"type":"string"}},"required":["contract_addr"]}},"oneOf":[{"required":["native_token"]},{"required":["token"]}]}},"required":["amount","info"]}},"msgs":{"type":"array","items":{"type":"object","properties":{"wasm":{"type":"object","properties":{"execute":{"type":"object","properties":{"contract_addr":{"type":"string"},"msg":{"type":"string"},"funds":{"type":"array","items":{"type":"object","properties":{"amount":{"type":"string"},"denom":{"type":"string"}},"required":["amount","denom"]}}},"required":["contract_addr","msg","funds"]}},"required":["execute"]}},"required":["wasm"]}}},"required":["assets","msgs"]}},"required":["flash_loan"]}')),_=function(e){var n=e.handleChange,t=(0,d.useRef)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.zx,{leftIcon:(0,r.jsx)(f.uii,{size:18}),colorScheme:"gray",variant:"outline",onClick:function(){var e;t&&(null===(e=t.current)||void 0===e||e.click())},children:"Upload File"}),(0,r.jsx)("input",{ref:t,id:"upload",type:"file",onChange:n,style:{visibility:"hidden",width:0}})]})};function E(e,n,t,r,o,i,a){try{var s=e[i](a),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,o)}function P(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){E(i,r,o,a,s,"next",e)}function s(e){E(i,r,o,a,s,"throw",e)}a(void 0)}))}}function z(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){z(e,n,t[n])}))}return e}var R={flash_loan:{assets:[],msgs:[]}},B={schema:O,mainMenuBar:!1,statusBar:!1,navigationBar:!1,mode:"code",SchemaTextCompleter:!0,allowSchemaSuggestions:!0};var M=function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var n=(0,d.useRef)(null),i=(0,d.useRef)(null),a=(0,d.useState)(null),u=a[0],p=a[1],h=(0,d.useState)(R),m=h[0],x=h[1],y=(0,s.sJ)(c.Zc).status,j="@wallet-state/connected"===y,b=q({json:m}),w=function(){var e=P(l().mark((function e(t){var r,o,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,null===n||void 0===n||null===(r=n.current)||void 0===r?void 0:r.validate();case 4:0===(null===(o=e.sent)||void 0===o?void 0:o.length)?(a=null===n||void 0===n||null===(i=n.current)||void 0===i?void 0:i.get(),x(a),p("")):p("Message validation failed."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),p("Invalid JSON");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),C=function(){var e=P(l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!n){e.next=6;break}return e.next=3,t.e(6373).then(t.t.bind(t,13807,23));case 3:r=e.sent,n.current=new r.default(i.current,N({},B,{onChange:w})),n.current.set(m);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){return C(),function(){var e;(null===n||void 0===n?void 0:n.current)&&(null===n||void 0===n||null===(e=n.current)||void 0===e||e.destroy())}}),[i,n,B]);var S=(0,d.useMemo)((function(){return j?u||"Flashloan":"Connect Wallet"}),[null===b||void 0===b?void 0:b.buttonLabel,y,u]);return(0,r.jsx)(o.kC,{padding:10,width:["full","900px"],height:"600px",background:"#1C1C1C",boxShadow:"0px 0px 50px rgba(0, 0, 0, 0.25)",borderRadius:"30px",display:["none","flex"],children:(0,r.jsxs)(o.gC,{width:"full",children:[(0,r.jsx)(o.Ug,{width:"full",justifyContent:"space-between",p:4,alignItems:"center",children:(0,r.jsx)(o.xu,{children:(0,r.jsx)(o.xv,{alignSelf:"flex-start",children:"JSON to execute the trade"})})}),(0,r.jsx)(g,{containerRef:i}),(0,r.jsxs)(o.Ug,{justify:"space-between",width:"full",p:4,alignItems:"center",children:[(0,r.jsxs)(o.Ug,{children:[(0,r.jsx)(v.zx,{leftIcon:(0,r.jsx)(f.JXC,{size:16}),variant:"outline",onClick:function(){if(n)try{var e;u&&p(""),n.current.repair(),n.current.format();var t=null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.get();x(t)}catch(r){p("Invalid JSON")}},children:"Format"}),(0,r.jsx)(_,{handleChange:function(e){var t=new FileReader;t.readAsText(e.target.files[0],"UTF-8"),e.target.value=null,t.onload=function(e){try{var t;u&&p(""),x(JSON.parse(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.result)),n.current.set(JSON.parse(e.target.result))}catch(u){n.current.set(e.target.result),p("Invalid JSON")}}}})]}),(0,r.jsx)(v.zx,{onClick:null===b||void 0===b?void 0:b.submit,variant:"primary",width:60,isLoading:(null===b||void 0===b?void 0:b.txStep)==k.Posting||(null===b||void 0===b?void 0:b.txStep)==k.Broadcasting,disabled:Boolean(u)||!j,children:S})]})]})})},J=function(){var e=(0,s.sJ)(c.Zc).chainId,n=(0,a.useRouter)(),t=(0,i.C)(),u=n.query.chainId,l=t.find((function(n){return n.chainId===e}));return l&&l.label.toLowerCase()===u?(0,r.jsx)(o.gC,{width:{base:"100%",md:"722px"},alignItems:"center",children:(0,r.jsxs)(o.xu,{children:[(0,r.jsx)(o.Ug,{justifyContent:"space-between",width:"full",paddingY:10,children:(0,r.jsx)(o.xv,{as:"h2",fontSize:"24",fontWeight:"700",children:"Flashloan"})}),(0,r.jsx)(M,{})]})}):null}},48074:function(e,n,t){"use strict";var r=t(67294);n.Z=function(e,n){var t=(0,r.useState)(e),o=t[0],i=t[1];return(0,r.useEffect)((function(){var t=setTimeout((function(){i(e)}),n);return function(){clearTimeout(t)}}),[e,n]),o}},34250:function(e,n,t){"use strict";t.d(n,{L$:function(){return i},b9:function(){return a},uv:function(){return s}});var r=t(28972),o=t(2387),i=function(e){var n=e.senderAddress,t=e.contractAddress,i=e.message,a=e.funds;return{typeUrl:"/cosmwasm.wasm.v1.MsgExecuteContract",value:o.MsgExecuteContract.fromPartial({sender:n,contract:t,msg:(0,r.toUtf8)(JSON.stringify(i)),funds:a||[]})}},a=function(e){var n=e.senderAddress,t=e.tokenAmount,i=e.tokenAddress,a=e.swapAddress;return{typeUrl:"/cosmwasm.wasm.v1.MsgExecuteContract",value:o.MsgExecuteContract.fromPartial({sender:n,contract:i,msg:(0,r.toUtf8)(JSON.stringify({increase_allowance:{amount:"".concat(t),spender:"".concat(a)}})),funds:[]})}},s=function(e){if(e.code)throw new Error("Error when broadcasting tx ".concat(e.transactionHash," at height ").concat(e.height,". Code: ").concat(e.code,"; Raw log: ").concat(e.rawLog));return e}},13755:function(){}}]);