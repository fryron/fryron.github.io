"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1014],{59657:function(n,t,e){var r=e(34051),o=e.n(r),u=e(67294),i=e(88767),a=e(92762),l=e(27484),c=e.n(l),s=e(70178),d=e.n(s),v=e(4480),f=e(36634);function p(n,t,e,r,o,u,i){try{var a=n[u](i),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(r,o)}function m(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var u=n.apply(t,e);function i(n){p(u,r,o,i,a,"next",n)}function a(n){p(u,r,o,i,a,"throw",n)}i(void 0)}))}}c().extend(d());t.Z=function(){var n=(0,v.sJ)(f.Zc),t=n.client,e=n.network,r=n.chainId,l=(0,a.Z)(e,r),s=(0,i.useQuery)({queryKey:["incentive","config",null===l||void 0===l?void 0:l.fee_distributor],queryFn:m(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===t||void 0===t?void 0:t.queryContractSmart(null===l||void 0===l?void 0:l.fee_distributor,{config:{}});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))),enabled:Boolean(l)&&Boolean(t)}).data,d=(0,i.useQuery)({queryKey:["incentive","epoch",null===l||void 0===l?void 0:l.fee_distributor],queryFn:m(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===t||void 0===t?void 0:t.queryContractSmart(null===l||void 0===l?void 0:l.fee_distributor,{current_epoch:{}});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))),enabled:Boolean(l)&&Boolean(t)}).data;return{dateToEpoch:function(n){var t,e,r,o,u;if(!(null===d||void 0===d||null===(t=d.epoch)||void 0===t?void 0:t.id)||!(null===s||void 0===s||null===(e=s.epoch_config)||void 0===e?void 0:e.duration)||!n)return null;var i=Number(null===d||void 0===d||null===(r=d.epoch)||void 0===r?void 0:r.start_time)/1e6,a=Number(null===s||void 0===s||null===(o=s.epoch_config)||void 0===o?void 0:o.duration)/1e6,l=Number(null===d||void 0===d||null===(u=d.epoch)||void 0===u?void 0:u.id),v=c()().utc(),f=c().utc(i),p=c()(n).utc(),m=p.diff(v,"millisecond"),y=(p.valueOf(),f.valueOf(),Math.floor(m/a));return y<0?l:l+y},epochToDate:function(n){var t,e,r,o;if(!(null===d||void 0===d||null===(t=d.epoch)||void 0===t?void 0:t.id)||!(null===s||void 0===s||null===(e=s.epoch_config)||void 0===e?void 0:e.duration))return null;var u=Number(null===d||void 0===d||null===(r=d.epoch)||void 0===r?void 0:r.id),i=c()().utc().set("hour",15).set("minute",0).set("second",0).set("millisecond",0),a=Number(null===s||void 0===s||null===(o=s.epoch_config)||void 0===o?void 0:o.duration)/1e6,l=i.valueOf()+(n-u)*a;return c()(l).local().format("YYYY/MM/DD")},currentEpoch:(0,u.useMemo)((function(){var n,t;return(null===d||void 0===d||null===(n=d.epoch)||void 0===n?void 0:n.id)?Number(null===d||void 0===d||null===(t=d.epoch)||void 0===t?void 0:t.id):null}),[d])}}},47964:function(n,t,e){e.d(t,{v:function(){return o}});var r=e(67294);function o(n){var t=(0,r.useMemo)((function(){var t=n.some((function(n){var t=n.isLoading,e=n.data;return t&&!e})),e=n.some((function(n){return n.isError})),r=null===n||void 0===n?void 0:n.map((function(n){return n.data}));return[r&&!r.includes(void 0)?r:void 0,t,e]}),[n]);return[t[0],t[1],t[2]]}},91474:function(n,t,e){e.d(t,{a:function(){return _}});var r=e(34051),o=e.n(r),u=e(67294),i=e(88767),a=e(34272),l=e(31479),c=e(21253),s=e(64087),d=e(93627),v=e(4480),f=e(36634),p=e(96823),m=e(7569);function y(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function h(n,t,e,r,o,u,i){try{var a=n[u](i),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(r,o)}function b(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var u=n.apply(t,e);function i(n){h(u,r,o,i,a,"next",n)}function a(n){h(u,r,o,i,a,"throw",n)}i(void 0)}))}}function k(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,o,u=[],i=!0,a=!1;try{for(e=e.call(n);!(i=(r=e.next()).done)&&(u.push(r.value),!t||u.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==e.return||e.return()}finally{if(a)throw o}}return u}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return y(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return y(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(){var n,t,e=(n=["\n    query ($chain: String!, $tokenList: String!) {\n      priceByTokenList(chain: $chain, tokenList: $tokenList) {\n        content {\n          priceInvertedUsd\n        }\n      }\n    }\n  "],t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}})));return w=function(){return e},e}var _=function(){var n=(0,s.Vd)(),t=(0,v.sJ)(f.Zc).chainId,e=(0,l.r)(t),r=function(){var n=(0,a.Ps)(w()),t=(0,i.useQuery)("whale-price",b(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.ZP)("https://tfm-multi-stage.tfm.dev/graphql",n,{chain:"terra2",tokenList:"ibc/36A02FFC4E74DF4F64305130C3DFA1B06BEAC775648927AA44467C76A77AB8DB,ibc/B3504E092456BA618CC28AC671A71FB08C6CA0FD0BE7C8A5B5A3E2DD933CC9E4"}));case 1:case"end":return t.stop()}}),t)})))).data;return(0,u.useMemo)((function(){var n,e,r;return(0,d.OK)(null===t||void 0===t||null===(n=t.priceByTokenList)||void 0===n||null===(e=n.content)||void 0===e||null===(r=e[0])||void 0===r?void 0:r.priceInvertedUsd).toNumber()||0}),[t])}(),y=k((0,c.t)(null===n||void 0===n?void 0:n.symbol),2),h=y[0],_=y[1],x=k((0,m.Xo)(),2),g=x[0],A=x[1],P=(0,u.useCallback)(function(){var t=b(o().mark((function t(r){var u,i,a,l,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=r.tokenA,i=r.tokenB,a=void 0===i?n:i,l=r.tokenAmountInDenom){t.next=3;break}return t.abrupt("return",0);case 3:return t.next=5,(0,p.g)({matchingPools:g({tokenA:u,tokenB:a}),tokenA:u,tokenB:a,client:e,amount:1,id:null===u||void 0===u?void 0:u.id});case 5:if(c=t.sent,(null===u||void 0===u?void 0:u.id)!==(null===a||void 0===a?void 0:a.id)||!(null===u||void 0===u?void 0:u.id)){t.next=8;break}return t.abrupt("return",l/c*h);case 8:return t.abrupt("return",c);case 9:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),[h,r,e,g,_]);return[P,Boolean(n&&e&&!_&&!A)]}},23544:function(n,t,e){e.d(t,{Fv:function(){return W},bD:function(){return z}});var r=e(34051),o=e.n(r),u=e(67294),i=e(88767),a=e(59657),l=e(69915);function c(n,t,e,r,o,u,i){try{var a=n[u](i),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(r,o)}var s=function(){var n,t=(n=o().mark((function n(t,e,r){var u,i,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r&&t&&e){n.next=2;break}return n.abrupt("return",null);case 2:if(!(0,l.Mg)(e)){n.next=8;break}return n.next=5,r.getBalance(t,e);case 5:n.t0=n.sent,n.next=11;break;case 8:return n.next=10,r.queryContractSmart(e,{balance:{address:t}});case 10:n.t0=n.sent;case 11:return u=n.t0,i=u.balance,a=u.amount,n.abrupt("return",Number(i||a));case 15:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,o){var u=n.apply(t,e);function i(n){c(u,r,o,i,a,"next",n)}function a(n){c(u,r,o,i,a,"throw",n)}i(void 0)}))});return function(n,e,r){return t.apply(this,arguments)}}(),d=e(5292),v=e(31479),f=e(43652),p=e(33434),m=e(90387),y=e(93627),h=e(43717);function b(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function k(n,t,e,r,o,u,i){try{var a=n[u](i),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(r,o)}function w(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var u=n.apply(t,e);function i(n){k(u,r,o,i,a,"next",n)}function a(n){k(u,r,o,i,a,"throw",n)}i(void 0)}))}}function _(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function x(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),r.forEach((function(t){_(n,t,e[t])}))}return n}function g(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,o,u=[],i=!0,a=!1;try{for(e=e.call(n);!(i=(r=e.next()).done)&&(u.push(r.value),!t||u.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==e.return||e.return()}finally{if(a)throw o}}return u}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return b(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return b(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(n){return P.apply(this,arguments)}function P(){return(P=w(o().mark((function n(t){var e,r,u,i,a,l;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.context.client,r=t.swap_address,n.next=3,(0,h.kI)(r,e);case 3:return u=n.sent,i=g((null===u||void 0===u?void 0:u.assets)||[],2),a=i[0],l=i[1],n.abrupt("return",x({},u,{swap_address:r,token1_reserve:Number(null===a||void 0===a?void 0:a.amount),token2_reserve:Number(null===l||void 0===l?void 0:l.amount),lp_token_supply:Number(null===u||void 0===u?void 0:u.total_share)}));case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var L=e(4480),S=e(36634),C=e(91591),O=e(14201);function B(n,t,e,r,o,u,i){try{var a=n[u](i),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(r,o)}function I(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var u=n.apply(t,e);function i(n){B(u,r,o,i,a,"next",n)}function a(n){B(u,r,o,i,a,"throw",n)}i(void 0)}))}}function N(n){return j.apply(this,arguments)}function j(){return j=I(o().mark((function n(t){var e,r,u,i,a,c,s,d,v,f,p;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=t.swap,r=t.address,u=t.context.client,i=t.totalLockedLp,a=t.myLockedLp,c=(0,l.Mg)(e.lp_token),!r){n.next=8;break}return n.next=5,(0,C.s)({tokenAddress:e.lp_token,client:u,address:r,isNative:c});case 5:n.t0=n.sent,n.next=9;break;case 8:n.t0=0;case 9:return s=n.t0,d=[(0,O.Kf)(e.token1_reserve),(0,O.Kf)(e.token2_reserve)],v=[(0,O.Kf)(d[0]*(s/e.lp_token_supply)),(0,O.Kf)(d[1]*(s/e.lp_token_supply))],f=[(0,O.Kf)(d[0]*(i/e.lp_token_supply)),(0,O.Kf)(d[1]*(i/e.lp_token_supply))],p=[(0,O.Kf)(d[0]*(a/e.lp_token_supply)),(0,O.Kf)(d[1]*(a/e.lp_token_supply))],n.abrupt("return",{totalAssets:d,myNotLockedAssets:v,myLockedAssets:p,totalLockedAssets:f,myNotLockedLp:s});case 15:case"end":return n.stop()}}),n)}))),j.apply(this,arguments)}function q(n,t,e,r,o,u,i){try{var a=n[u](i),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(r,o)}var D=function(){var n,t=(n=o().mark((function n(t,e){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={info:{}},n.abrupt("return",e.queryContractSmart(t,r));case 2:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,o){var u=n.apply(t,e);function i(n){q(u,r,o,i,a,"next",n)}function a(n){q(u,r,o,i,a,"throw",n)}i(void 0)}))});return function(n,e){return t.apply(this,arguments)}}();function E(n,t,e,r,o,u,i){try{var a=n[u](i),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(r,o)}function K(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var u=n.apply(t,e);function i(n){E(u,r,o,i,a,"next",n)}function a(n){E(u,r,o,i,a,"throw",n)}i(void 0)}))}}var T=5256e3;function F(n){return M.apply(this,arguments)}function M(){return M=K(o().mark((function n(t){var e,r,u,i,a,l;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.rewardsTokens,r=t.context,u=r.client,i=r.getTokenDollarValue,n.next=3,Promise.all(e.map((function(n){var t=n.rewards_address;return D(t,u)})));case 3:return a=n.sent,n.next=6,u.getHeight();case 6:return l=n.sent,n.abrupt("return",Promise.all(a.map(function(){var n=K(o().mark((function n(t,r){var u,a,c,s,d;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u=e[r],a=l>t.reward.period_finish,c=a?0:(0,O.rp)(t.reward.reward_rate,u.decimals),!a){n.next=7;break}n.t0=0,n.next=10;break;case 7:return n.next=9,i({tokenInfo:u,tokenAmountInDenom:c});case 9:n.t0=n.sent;case 10:return s=n.t0,d={ratePerBlock:{tokenAmount:c,dollarValue:s},ratePerYear:{tokenAmount:c*T,dollarValue:s*T}},n.abrupt("return",{contract:t,rewardRate:d,tokenInfo:u});case 13:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())));case 8:case"end":return n.stop()}}),n)}))),M.apply(this,arguments)}var V=e(91474),Z=e(3704);function Y(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function $(n,t,e,r,o,u,i){try{var a=n[u](i),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(r,o)}function U(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var u=n.apply(t,e);function i(n){$(u,r,o,i,a,"next",n)}function a(n){$(u,r,o,i,a,"throw",n)}i(void 0)}))}}function J(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Q(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),r.forEach((function(t){J(n,t,e[t])}))}return n}function R(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,o,u=[],i=!0,a=!1;try{for(e=e.call(n);!(i=(r=e.next()).done)&&(u.push(r.value),!t||u.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==e.return||e.return()}finally{if(a)throw o}}return u}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return Y(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Y(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=function(){var n=U(o().mark((function n(t){var e,r,u,i,a,l;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=t.pool,r=t.client,(u=t.address)&&r&&e.staking_address){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,null===r||void 0===r?void 0:r.queryContractSmart(e.staking_address,{positions:{address:u}});case 5:if(n.t0=n.sent,n.t0){n.next=8;break}n.t0=[];case 8:return i=n.t0,a=i.positions,l=void 0===a?[]:a,n.abrupt("return",(null===l||void 0===l?void 0:l.map((function(n){var t=n.open_position,e=void 0===t?{}:t,r=n.closed_position;return Q({},e,void 0===r?{}:r)})).reduce((function(n,t){return n+Number(t.amount)}),0))||0);case 12:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),z=function(n){var t=n.pools,e=n.refetchInBackground,r=void 0!==e&&e,u=n.client,l=R((0,V.a)(),2),c=l[0],v=l[1],m=(0,f.Z)(),h=(0,L.sJ)(S.Zc).address,b=R((0,p.K)(),1)[0],k=(0,a.Z)(),w=k.epochToDate,_=k.currentEpoch,x={client:u,getTokenDollarValue:c};function g(n){return P.apply(this,arguments)}function P(){return P=U(o().mark((function n(t){var e,r,i,a,l,c,v,f,p,k,g,P,L,S,C,O,B,I,j,q,D,E,K,T,M,V;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(I=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=(null===a||void 0===a?void 0:a.symbol)===d.XZ||(null===a||void 0===a?void 0:a.symbol)===d.Ww?d.a:null===a||void 0===a?void 0:a.symbol,r=(null===c||void 0===c?void 0:c.symbol)===d.XZ||(null===c||void 0===c?void 0:c.symbol)===d.Ww?d.a:null===c||void 0===c?void 0:c.symbol;return{tokenAmount:null!==t&&void 0!==t?t:n[1]+n[0],dollarValue:Number((0,y.mF)(n[0]))*(null===m||void 0===m?void 0:m[e])+Number((0,y.mF)(n[1]))*(null===m||void 0===m?void 0:m[r])}},u){n.next=4;break}return n.abrupt("return",t);case 4:return n.next=6,A({context:x,swap_address:t.swap_address});case 6:return r=n.sent,a=t.pool_assets.find((function(n){var t,e,o,u,a,l;return n.denom===(null!==(i=null===(t=null===r||void 0===r?void 0:r.assets[0])||void 0===t||null===(e=t.info)||void 0===e||null===(o=e.native_token)||void 0===o?void 0:o.denom)&&void 0!==i?i:null===(u=null===r||void 0===r?void 0:r.assets[0])||void 0===u||null===(a=u.info)||void 0===a||null===(l=a.token)||void 0===l?void 0:l.contract_addr)})),c=t.pool_assets.find((function(n){var t,e,o,u,i,a;return n.denom===(null!==(l=null===(t=null===r||void 0===r?void 0:r.assets[1])||void 0===t||null===(e=t.info)||void 0===e||null===(o=e.native_token)||void 0===o?void 0:o.denom)&&void 0!==l?l:null===(u=null===r||void 0===r?void 0:r.assets[1])||void 0===u||null===(i=u.info)||void 0===i||null===(a=i.token)||void 0===a?void 0:a.contract_addr)})),v=function(){var n=U(o().mark((function n(e){var r,u;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.client)&&(null===t||void 0===t?void 0:t.staking_address)&&b.tokens.length>0){n.next=3;break}return n.abrupt("return",[]);case 3:return n.next=5,null===r||void 0===r?void 0:r.queryContractSmart(t.staking_address,{flows:{}});case 5:return u=n.sent,n.abrupt("return",null===u||void 0===u?void 0:u.map((function(n){var t,e,r,o,u,i,a=(null===n||void 0===n||null===(t=n.flow_asset)||void 0===t||null===(e=t.info)||void 0===e||null===(r=e.token)||void 0===r?void 0:r.contract_addr)||(null===(u=null===n||void 0===n||null===(o=n.flow_asset)||void 0===o?void 0:o.info.native_token)||void 0===u?void 0:u.denom)||null;return null===b||void 0===b||null===(i=b.tokens)||void 0===i?void 0:i.find((function(n){return(null===n||void 0===n?void 0:n.denom)===a}))})));case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),f=function(n){var e=n.client,r=n.address;return e&&(null===t||void 0===t?void 0:t.staking_address)&&b.tokens.length>0?null===e||void 0===e?void 0:e.queryContractSmart(t.staking_address,{flows:{}}).then((function(n){var t=null===n||void 0===n?void 0:n.map((function(n){var t,e,o,u,i,a=n.start_epoch,l=n.end_epoch,c=function(){switch(!0){case _<a:return"upcoming";case _>=a&&_<l:return"active";case _>=l:return"over";default:return""}}(),s=(null===(t=n.flow_asset.info)||void 0===t||null===(e=t.token)||void 0===e?void 0:e.contract_addr)||(null===(o=n.flow_asset.info)||void 0===o||null===(u=o.native_token)||void 0===u?void 0:u.denom)||null;return{token:null===b||void 0===b||null===(i=b.tokens)||void 0===i?void 0:i.find((function(n){return(null===n||void 0===n?void 0:n.denom)===s})),isCreator:n.flow_creator===r,endTime:w(l),startTime:w(a),flowId:n.flow_id,amount:n.flow_asset.amount,state:c}}));return t?t.filter(Boolean):[]})):[]},n.next=15,v({client:u});case 15:return p=n.sent,n.next=18,X({pool:t,client:u,address:h});case 18:return k=n.sent,n.next=21,s(t.staking_address,t.lp_token,u);case 21:return g=n.sent,n.next=24,N({context:x,swap:Q({},r,t),address:h,totalLockedLp:g,myLockedLp:k});case 24:if(P=n.sent,L=P.myNotLockedAssets,S=P.totalLockedAssets,C=P.myLockedAssets,O=P.totalAssets,B=P.myNotLockedLp,j=[I(L,B),I(S),I(C)],q=j[0],D=j[1],E=j[2],K=0,!((null===(e=t.rewards_tokens)||void 0===e?void 0:e.length)>0)){n.next=40;break}return n.next=38,F({swapAddress:t.swap_address,rewardsTokens:t.rewards_tokens,context:x});case 38:T=n.sent,K=H({rewardsContracts:T,totalStakedDollarValue:D.dollarValue||1});case 40:return n.next=42,f({client:u,address:h});case 42:return M=n.sent,V={available:{totalLpAmount:r.lp_token_supply,provided:q},locked:{total:D,mine:E},providedTotal:{tokenAmount:q.tokenAmount+E.tokenAmount,dollarValue:q.dollarValue+E.dollarValue},myFlows:M,reserves:{myNotLocked:L,totalLocked:S,myLocked:C,total:O},rewards:{annualYieldPercentageReturn:K,contracts:T}},n.abrupt("return",Q({},t,{flows:p,liquidity:V}));case 45:case"end":return n.stop()}}),n)}))),P.apply(this,arguments)}return(0,i.useQueries)((null!==t&&void 0!==t?t:[]).map((function(n){return{queryKey:"@pool-liquidity/".concat(n.pool_id,"/").concat(h),enabled:Boolean(u&&n.pool_id&&v)&&b.tokens.length>0&&Boolean(m),refetchOnMount:!1,refetchInterval:r?d.w7:void 0,refetchIntervalInBackground:r,queryFn:function(){return U(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u){t.next=2;break}return t.abrupt("return",n);case 2:return t.abrupt("return",g(n));case 3:case"end":return t.stop()}}),t)})))()}}})))},W=function(n){var t=n.poolId,e=(0,Z.r)(),r=e.data,o=e.isLoading,i=(0,L.sJ)(S.Zc).chainId,a=(0,v.r)(i),l=(0,u.useMemo)((function(){var n=null===r||void 0===r?void 0:r.poolsById[t];return n?[n]:void 0}),[t,r]),c=R(z({pools:l,refetchInBackground:!0,client:a}),1)[0];return[null===c||void 0===c?void 0:c.data,(null===c||void 0===c?void 0:c.isLoading)||o,null===c||void 0===c?void 0:c.isError]};function H(n){var t=n.rewardsContracts,e=n.totalStakedDollarValue;if(!d.j4)return 0;var r=t.reduce((function(n,t){return n+t.rewardRate.ratePerYear.dollarValue}),0);return(0,m.Kf)(r/e*100)}},91591:function(n,t,e){e.d(t,{q:function(){return i},s:function(){return c}});var r=e(34051),o=e.n(r);function u(n,t,e,r,o,u,i){try{var a=n[u](i),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(r,o)}var i=function(){var n,t=(n=o().mark((function n(t){var e,r,u;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.client,r=t.senderAddress,u=t.msgs,n.abrupt("return",e.post(r,u));case 2:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(n){u(i,r,o,a,l,"next",n)}function l(n){u(i,r,o,a,l,"throw",n)}a(void 0)}))});return function(n){return t.apply(this,arguments)}}(),a=e(90387);function l(n,t,e,r,o,u,i){try{var a=n[u](i),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(r,o)}var c=function(){var n,t=(n=o().mark((function n(t){var e,r,u,i,l,c;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=t.client,r=t.tokenAddress,u=t.address,i=t.isNative,l=void 0!==i&&i,c=0,n.prev=2,!l){n.next=11;break}return n.t0=Number,n.next=7,e.getBalance(u,r);case 7:n.t1=n.sent.amount,c=(0,n.t0)(n.t1),n.next=16;break;case 11:return n.t2=Number,n.next=14,e.queryContractSmart(r,{balance:{address:u}});case 14:n.t3=n.sent.balance,c=(0,n.t2)(n.t3);case 16:return n.abrupt("return",(0,a.Kf)(c));case 19:n.prev=19,n.t4=n.catch(2),console.error("Cannot get liquidity balance:",n.t4);case 22:case"end":return n.stop()}}),n,null,[[2,19]])})),function(){var t=this,e=arguments;return new Promise((function(r,o){var u=n.apply(t,e);function i(n){l(u,r,o,i,a,"next",n)}function a(n){l(u,r,o,i,a,"throw",n)}i(void 0)}))});return function(n){return t.apply(this,arguments)}}()}}]);